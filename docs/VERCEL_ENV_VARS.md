# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è WebSocket —Å–µ—Ä–≤–µ—Ä–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

### 1. NEXT_PUBLIC_WS_HOST

**–ó–Ω–∞—á–µ–Ω–∏–µ:** `sessions-ws.onrender.com`

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –¢–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è, **–ë–ï–ó** `https://`
- **–ë–ï–ó** —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ
- **–ë–ï–ó** –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- `https://sessions-ws.onrender.com`
- `sessions-ws.onrender.com/`
- `wss://sessions-ws.onrender.com`

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
- `sessions-ws.onrender.com`

### 2. NEXT_PUBLIC_WS_PORT

**–ó–Ω–∞—á–µ–Ω–∏–µ:** `10000` (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Render!)

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- **–î–ª—è Render:** –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `NEXT_PUBLIC_WS_PORT=10000`
- Render –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç WebSocket –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç 443
- –ï—Å–ª–∏ –ø–æ—Ä—Ç —É–∫–∞–∑–∞–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è, –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–∞–∂–µ –¥–ª—è production
- –ï—Å–ª–∏ –ø–æ—Ä—Ç –Ω–µ —É–∫–∞–∑–∞–Ω, –¥–ª—è production –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç 443 (–Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ URL)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –í **production** (HTTPS) —Å Render:
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `wss://`
   - –ü–æ—Ä—Ç: –∏–∑ `NEXT_PUBLIC_WS_PORT` (10000 –¥–ª—è Render)
   - URL: `wss://sessions-ws.onrender.com:10000/api/realtime/transcribe?token=...`

2. –í **production** (HTTPS) –±–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞:
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `wss://`
   - –ü–æ—Ä—Ç: 443 (–Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ URL)
   - URL: `wss://sessions-ws.onrender.com/api/realtime/transcribe?token=...`

3. –í **development** (HTTP):
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `ws://`
   - –ü–æ—Ä—Ç: –∏–∑ `NEXT_PUBLIC_WS_PORT` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3001)
   - URL: `ws://localhost:3001/api/realtime/transcribe?token=...`

## –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

1. **DATABASE_URL**
   - PostgreSQL connection string
   - –ü—Ä–∏–º–µ—Ä: `postgresql://user:password@host:5432/db?sslmode=require`

2. **NEXTAUTH_SECRET**
   - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è NextAuth.js
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: `openssl rand -base64 32`

3. **NEXTAUTH_URL**
   - URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü—Ä–∏–º–µ—Ä: `https://www.4sessions.space` (–ë–ï–ó —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ)

4. **GOOGLE_CLIENT_ID**
   - OAuth Client ID –∏–∑ Google Cloud Console

5. **GOOGLE_CLIENT_SECRET**
   - OAuth Client Secret –∏–∑ Google Cloud Console

6. **LIVEKIT_API_KEY**
   - API –∫–ª—é—á –æ—Ç LiveKit

7. **LIVEKIT_API_SECRET**
   - API —Å–µ–∫—Ä–µ—Ç –æ—Ç LiveKit

8. **NEXT_PUBLIC_LIVEKIT_URL**
   - URL LiveKit —Å–µ—Ä–≤–µ—Ä–∞
   - –ü—Ä–∏–º–µ—Ä: `wss://your-project.livekit.cloud`

9. **NEXT_PUBLIC_WS_HOST**
   - –•–æ—Å—Ç WebSocket —Å–µ—Ä–≤–µ—Ä–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
   - –ü—Ä–∏–º–µ—Ä: `sessions-ws.onrender.com` (–ë–ï–ó –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)

10. **NEXT_PUBLIC_WS_PORT** (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è Render!)
    - –ü–æ—Ä—Ç WebSocket —Å–µ—Ä–≤–µ—Ä–∞
    - –ó–Ω–∞—á–µ–Ω–∏–µ: `10000` (–¥–ª—è Render)
    - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** Render —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ—Ä—Ç–∞, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç WebSocket –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- **OPENAI_API_KEY** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OpenAI)
- **GLADIA_API_KEY** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Gladia –Ω–∞–ø—Ä—è–º—É—é)

### Sentry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫):

- **NEXT_PUBLIC_SENTRY_DSN** - DSN –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏
  - –ü—Ä–∏–º–µ—Ä: `https://xxxxx@xxxxx.ingest.sentry.io/xxxxx`
- **SENTRY_DSN** - DSN –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ)
- **SENTRY_ORG** - Slug –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ Sentry
- **SENTRY_PROJECT** - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–±—ã—á–Ω–æ `rooms`)

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. [SENTRY_SETUP.md](./SENTRY_SETUP.md)

## –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Vercel Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment Variables**
2. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   - **Key:** –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `NEXT_PUBLIC_WS_HOST`)
   - **Value:** –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sessions-ws.onrender.com`)
   - **Environment:** –≤—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Production, Preview, Development)

3. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
   - –ù–∞–∂–º–∏—Ç–µ **Save**
   - –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (Redeploy)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (DevTools ‚Üí Console):

1. WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `wss://` –≤ production
2. –ù–µ—Ç –æ—à–∏–±–æ–∫ "Mixed Content"
3. –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Mixed Content" –æ—à–∏–±–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ws://` –≤–º–µ—Å—Ç–æ `wss://` –≤ production

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `NEXT_PUBLIC_WS_HOST` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `https://`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS
- –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WSS

### –ü—Ä–æ–±–ª–µ–º–∞: WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. WebSocket —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç: `https://sessions-ws.onrender.com/health`
2. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NEXT_PUBLIC_WS_HOST` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
4. Firewall –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

