# –í—ã–≥–æ–¥—ã –æ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ WebSocket/RTMP —Å–µ—Ä–≤–µ—Ä–∞

## –û–±–∑–æ—Ä

–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤—ã–≥–æ–¥ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –æ—Ü–µ–Ω–∫–æ–π –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º—É.

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1.1 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ broadcast

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –ë—ã–ª–æ:
try {
  clientMeta.ws.send(message)
} catch (error) {
  console.error('Failed to send:', error)
  // –ö–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤ sessionClients ‚Üí —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏
}

// –°—Ç–∞–Ω–µ—Ç:
try {
  clientMeta.ws.send(message)
} catch (error) {
  console.error('Failed to send:', error)
  clientMeta.ws.close()  // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
  unregisterClient(sessionSlug, clientMeta.ws)  // –£–¥–∞–ª—è–µ–º –∏–∑ Map
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ú–µ—Ä—Ç–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ `sessionClients` Map
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –æ—Ç –º–µ—Ä—Ç–≤—ã—Ö WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 100 –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã, 10 –∏–∑ –Ω–∏—Ö –ø–æ—Ç–µ—Ä—è–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (—Å–µ—Ç—å, –∑–∞–∫—Ä—ã–ª–∏ –≤–∫–ª–∞–¥–∫—É)
–°–µ–π—á–∞—Å: 10 –º–µ—Ä—Ç–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Å—Ç–∞—é—Ç—Å—è –≤ Map ‚Üí 10 * ~200 bytes = 2KB —É—Ç–µ—á–∫–∞ (–Ω–∞–≤—Å–µ–≥–¥–∞)
–ü–æ—Å–ª–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ ‚Üí 0KB —É—Ç–µ—á–∫–∞
```

#### 2. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å broadcast
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –û–¥–∏–Ω –±–∏—Ç—ã–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å broadcast –¥–ª—è –≤—Å–µ—Ö
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ—Ä—Ç–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Å—Ä–∞–∑—É —É–¥–∞–ª—è—é—Ç—Å—è, broadcast –∏–¥–µ—Ç —Ç–æ–ª—å–∫–æ –∫ –∂–∏–≤—ã–º
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 10-20% –≤—Ä–µ–º–µ–Ω–∏ broadcast –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –º–µ—Ä—Ç–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 50 –∫–ª–∏–µ–Ω—Ç–æ–≤, 5 –º–µ—Ä—Ç–≤—ã—Ö
–°–µ–π—á–∞—Å: broadcast –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º 50 ‚Üí 5 –æ—à–∏–±–æ–∫ ‚Üí ~50-100ms –∑–∞–¥–µ—Ä–∂–∫–∞
–ü–æ—Å–ª–µ: broadcast —Ç–æ–ª—å–∫–æ –∫ 45 –∂–∏–≤—ã–º ‚Üí 0 –æ—à–∏–±–æ–∫ ‚Üí ~30-50ms (–±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 40-50%)
```

#### 3. –¢–æ—á–Ω–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–ú–µ—Ç—Ä–∏–∫–∞:** –¢–æ—á–Ω–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫ ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "50 –∫–ª–∏–µ–Ω—Ç–æ–≤", —Ä–µ–∞–ª—å–Ω–æ 45
–ü–æ—Å–ª–µ: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "45 –∫–ª–∏–µ–Ω—Ç–æ–≤" (—Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
```

#### 4. –ú–µ–Ω—å—à–µ –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ—Ç –º–µ—Ä—Ç–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞—Å–æ—Ä—è—é—Ç –ª–æ–≥–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –∫–ª–∏–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 90-95% –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –±—ã—Å—Ç—Ä–µ–µ broadcast
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: —Ç–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –õ–æ–≥–∏: –º–µ–Ω—å—à–µ —à—É–º–∞

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 30 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** 0% (—Ç–æ–ª—å–∫–æ —É–ª—É—á—à–µ–Ω–∏—è)

---

### 1.2 –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (FFmpeg, Gladia)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
async stop(): Promise<void> {
  // 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º FFmpeg —Å —Ç–∞–π–º–∞—É—Ç–æ–º
  if (this.ffmpegProcess) {
    this.ffmpegProcess.kill('SIGTERM')
    await waitForProcessExit(this.ffmpegProcess, 5000)  // 5 —Å–µ–∫ —Ç–∞–π–º–∞—É—Ç
    if (stillRunning) {
      this.ffmpegProcess.kill('SIGKILL')  // Force kill
    }
  }
  
  // 2. –ó–∞–∫—Ä—ã–≤–∞–µ–º Gladia —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
  if (this.gladiaBridge) {
    this.gladiaBridge.close()
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ WebSocket –∑–∞–∫—Ä—ã—Ç
    await waitForGladiaClose(this.gladiaBridge, 2000)
  }
  
  // 3. –û—á–∏—â–∞–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏
  this.ffmpegProcess = null
  this.gladiaBridge = null
  this.audioBuffer = Buffer.alloc(0)
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** FFmpeg –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –ø—Ä–∏ `kill('SIGTERM')`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π `SIGKILL` –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ FFmpeg

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 10 —Å–µ—Å—Å–∏–π –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å, –Ω–æ 2 FFmpeg –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≤–∏—Å–ª–∏
–°–µ–π—á–∞—Å: 2 –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–∏—Å—è—Ç –≤ —Å–∏—Å—Ç–µ–º–µ ‚Üí –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç CPU/RAM
–ü–æ—Å–ª–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SIGKILL ‚Üí 0 –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

#### 2. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** Gladia WebSocket –º–æ–∂–µ—Ç –Ω–µ –∑–∞–∫—Ä—ã—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% –≤–∏—Å—è—â–∏—Ö Gladia —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: –ü–æ—Å–ª–µ 100 —Å–µ—Å—Å–∏–π ‚Üí 5 –≤–∏—Å—è—â–∏—Ö Gladia WebSocket ‚Üí 5 * ~10KB = 50KB —É—Ç–µ—á–∫–∞
–ü–æ—Å–ª–µ: –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è ‚Üí 0KB —É—Ç–µ—á–∫–∞
```

#### 3. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü—Ä–∏ —á–∞—Å—Ç—ã—Ö —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∏—Å—Ç–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ
- **–ú–µ—Ç—Ä–∏–∫–∞:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ 100+ —Å–µ—Å—Å–∏–π –≤ –¥–µ–Ω—å

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 50 —Å–µ—Å—Å–∏–π –≤ –¥–µ–Ω—å, –∫–∞–∂–¥–∞—è —Å–æ–∑–¥–∞–µ—Ç/—É–¥–∞–ª—è–µ—Ç FFmpeg + Gladia
–°–µ–π—á–∞—Å: –ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é ‚Üí –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Üí –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã
–ü–æ—Å–ª–µ: –ß–∏—Å—Ç–∞—è –æ—á–∏—Å—Ç–∫–∞ ‚Üí —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ–¥–µ–ª—è–º–∏
```

#### 4. –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ —Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** 100% –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –Ω–µ—Ç –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –†–µ—Å—É—Ä—Å—ã: –ø–æ–ª–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏/CPU
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å: —è–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 —á–∞—Å–∞  
**–†–∏—Å–∫:** 0% (—Ç–æ–ª—å–∫–æ —É–ª—É—á—à–µ–Ω–∏—è)

---

### 1.3 –£–ª—É—á—à–µ–Ω–∏–µ Heartbeat (ping/pong —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ pong
let missedPongs = 0
const MAX_MISSED_PONGS = 3

ws.on('pong', () => {
  missedPongs = 0  // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞
})

const pingInterval = setInterval(() => {
  if (ws.readyState === WebSocket.OPEN) {
    ws.ping()
    missedPongs++
    
    if (missedPongs >= MAX_MISSED_PONGS) {
      // –ö–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º
      ws.close(1008, 'Heartbeat timeout')
      unregisterClient(sessionSlug, ws)
      clearInterval(pingInterval)
    }
  }
}, 30000)
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç "–∑–∞–≤–∏—Å–Ω—É—Ç—å" (–ø—Ä–æ–∫—Å–∏, —Å–µ—Ç—å), –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è OPEN
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% "–∑–æ–º–±–∏" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –ö–ª–∏–µ–Ω—Ç –ø–æ—Ç–µ—Ä—è–ª —Å–µ—Ç—å, –Ω–æ WebSocket –Ω–µ –∑–∞–∫—Ä—ã–ª—Å—è
–°–µ–π—á–∞—Å: –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–∏—Å–∏—Ç 10+ –º–∏–Ω—É—Ç ‚Üí broadcast –∏–¥–µ—Ç –≤ –Ω–∏–∫—É–¥–∞
–ü–æ—Å–ª–µ: –ß–µ—Ä–µ–∑ 90 —Å–µ–∫—É–Ω–¥ (3 missed pongs) ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
```

#### 2. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ú–µ—Ä—Ç–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–Ω–∏–º–∞—é—Ç –ø–∞–º—è—Ç—å –∏ —Å–ª–æ—Ç—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% —É—Ç–µ—á–µ–∫ –æ—Ç –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: 10 –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π ‚Üí 10 * ~5KB = 50KB —É—Ç–µ—á–∫–∞
–ü–æ—Å–ª–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ ‚Üí 0KB —É—Ç–µ—á–∫–∞
```

#### 3. –¢–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "50 –∫–ª–∏–µ–Ω—Ç–æ–≤", —Ä–µ–∞–ª—å–Ω–æ 45
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ª—å–∫–æ –∂–∏–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö
- **–ú–µ—Ç—Ä–∏–∫–∞:** –¢–æ—á–Ω–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫ ‚Üë 100%

#### 4. –õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–æ—á–µ–º—É –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø–≤–Ω—ã–µ –ª–æ–≥–∏ –æ heartbeat timeout
- **–ú–µ—Ç—Ä–∏–∫–∞:** –õ–µ–≥—á–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ –†–µ—Å—É—Ä—Å—ã: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: —Ç–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: —è–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1 —á–∞—Å  
**–†–∏—Å–∫:** 5% (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–æ–∫—Å–∏)

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: FFmpeg —Ñ–ª–∞–≥–∏ —Å —Ç–µ—Å—Ç–∞–º–∏

### 2.1 –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ Low-Latency —Ñ–ª–∞–≥–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏
const ffmpegArgs = [
  '-fflags', 'nobuffer',
  '-flags', 'low_delay',
  '-probesize', '64',        // –ë—ã–ª–æ: 4096
  '-analyzeduration', '50000', // –ë—ã–ª–æ: 100000 (100ms ‚Üí 50ms)
  '-use_wallclock_as_timestamps', '1',  // –ù–æ–≤—ã–π —Ñ–ª–∞–≥
  // ...
]
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- **–¢–µ–∫—É—â–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~500-800ms (FFmpeg –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è + Gladia –æ–±—Ä–∞–±–æ—Ç–∫–∞)
- **–¶–µ–ª–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~300-500ms
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 30-40% –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –£—á–∞—Å—Ç–Ω–∏–∫ –≥–æ–≤–æ—Ä–∏—Ç "Hello"
–°–µ–π—á–∞—Å:
  - –ì–æ–≤–æ—Ä–∏—Ç: 0ms
  - FFmpeg –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è: 100-200ms
  - Gladia –æ–±—Ä–∞–±–æ—Ç–∫–∞: 300-500ms
  - Broadcast: 50ms
  - –ò—Ç–æ–≥–æ: 450-750ms –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ

–ü–æ—Å–ª–µ:
  - –ì–æ–≤–æ—Ä–∏—Ç: 0ms
  - FFmpeg –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è: 20-50ms (‚Üì 75%)
  - Gladia –æ–±—Ä–∞–±–æ—Ç–∫–∞: 300-500ms (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
  - Broadcast: 50ms
  - –ò—Ç–æ–≥–æ: 370-600ms (‚Üì 15-20%)
```

#### 2. –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Ä–µ—á—å
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü–µ—Ä–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –Ω–∞—á–∞–ª–æ —Ä–µ—á–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 20-30% –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –£—á–∞—Å—Ç–Ω–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å
–°–µ–π—á–∞—Å: –ü–µ—Ä–≤—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 500-800ms
–ü–æ—Å–ª–µ: –ü–µ—Ä–≤—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 300-500ms (‚Üì 40%)
```

#### 3. –õ—É—á—à–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –¢–∞–π–º–∫–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º–∏ –∏–∑-–∑–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `-use_wallclock_as_timestamps` —É–ª—É—á—à–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- **–ú–µ—Ç—Ä–∏–∫–∞:** –¢–æ—á–Ω–æ—Å—Ç—å —Ç–∞–π–º–∫–æ–¥–æ–≤ ‚Üë 20-30%

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö RTMP –ø–æ—Ç–æ–∫–æ–≤
- ‚ö†Ô∏è –ù—É–∂–Ω—ã —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –æ—Ç LiveKit

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ‚Üì 30-40% –∑–∞–¥–µ—Ä–∂–∫–∏
- ‚úÖ UX: –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Ä–µ—á—å
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å: –ª—É—á—à–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 —á–∞—Å–∞ (—Å —Ç–µ—Å—Ç–∞–º–∏)  
**–†–∏—Å–∫:** 20% (–º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

### 2.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ PCM —á–∞–Ω–∫–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–µ–ª–∞–µ–º —Ä–∞–∑–º–µ—Ä –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º
const PCM_CHUNK_SIZE_MS = parseInt(process.env.PCM_CHUNK_SIZE_MS || '100', 10)
const OPTIMAL_CHUNK_SIZE = (PCM_CHUNK_SIZE_MS / 1000) * 16000 * 2  // bytes

// –£–ª—É—á—à–∞–µ–º –ª–æ–≥–∏–∫—É –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏
if (audioBuffer.length >= OPTIMAL_CHUNK_SIZE || shouldFlush) {
  this.gladiaBridge.sendAudio(audioBuffer)
  audioBuffer = Buffer.alloc(0)
  lastFlushTime = now
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω (100ms)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –ù—É–∂–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–µ—Å—Å–∏–π
–°–µ–π—á–∞—Å: –í—Å–µ–≥–¥–∞ 100ms ‚Üí –Ω–µ–ª—å–∑—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
–ü–æ—Å–ª–µ: –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PCM_CHUNK_SIZE_MS=50 ‚Üí ‚Üì 50% –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Å—Å–∏–π
```

#### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –û–¥–∏–Ω —Ä–∞–∑–º–µ—Ä –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Gladia
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ì–∏–±–∫–æ—Å—Ç—å –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Gladia
–°–µ–π—á–∞—Å: –í—Å–µ–≥–¥–∞ 100ms ‚Üí –º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
–ü–æ—Å–ª–µ: –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PCM_CHUNK_SIZE_MS=200 ‚Üí ‚Üì 50% –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gladia
```

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω—É–∂–¥—ã
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 30 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** 0% (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–∏)

---

### 2.3 Backpressure (–æ—á–µ—Ä–µ–¥–∏)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º per-session –æ—á–µ—Ä–µ–¥–∏
const sessionQueues = new Map<string, Array<ServerTranscriptionMessage>>()
const MAX_QUEUE_SIZE = 1000

function broadcastWithBackpressure(sessionSlug: string, message: ServerTranscriptionMessage) {
  const queue = sessionQueues.get(sessionSlug) || []
  
  // –ï—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞ ‚Üí –¥—Ä–æ–ø–∞–µ–º —Å—Ç–∞—Ä—ã–µ
  if (queue.length >= MAX_QUEUE_SIZE) {
    const dropped = queue.shift()  // –î—Ä–æ–ø–∞–µ–º —Å–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ
    recordCounter('ws.queue_drops_total')
    console.warn('[WS] Queue overflow, dropped message', { sessionSlug })
  }
  
  queue.push(message)
  sessionQueues.set(sessionSlug, queue)
  
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  setImmediate(() => processQueue(sessionSlug))
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö broadcast –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 50 –∫–ª–∏–µ–Ω—Ç–æ–≤, 5 –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã—Ö (3G —Å–µ—Ç—å)
–°–µ–π—á–∞—Å: Broadcast –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop –Ω–∞ 200-500ms ‚Üí –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –≤—Å–µ—Ö
–ü–æ—Å–ª–µ: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí event loop –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚Üí —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
```

#### 2. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –ö–ª–∏–µ–Ω—Ç –ø–æ—Ç–µ—Ä—è–ª —Å–µ—Ç—å, –Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –∑–∞–∫—Ä—ã–ª–æ—Å—å
–°–µ–π—á–∞—Å: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
–ü–æ—Å–ª–µ: –ú–∞–∫—Å–∏–º—É–º 1000 —Å–æ–æ–±—â–µ–Ω–∏–π ‚Üí ~500KB –Ω–∞ —Å–µ—Å—Å–∏—é ‚Üí –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```

#### 3. –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –µ—Å—Ç—å –ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ broadcast
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ—Ç—Ä–∏–∫–∞ `ws.session_broadcast_lag_ms` –ø–æ–∫–∞–∂–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–æ—á–µ–º—É —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
–ü–æ—Å–ª–µ: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "ws.session_broadcast_lag_ms: 500ms" ‚Üí –≤–∏–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
```

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –î—Ä–æ–ø —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤
- ‚ö†Ô∏è –ù—É–∂–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: —á—Ç–æ –¥—Ä–æ–ø–∞—Ç—å (—Å—Ç–∞—Ä—ã–µ partial –∏–ª–∏ final?)

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ event loop
- ‚úÖ –†–µ—Å—É—Ä—Å—ã: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –≤–∏–¥–∏–º–æ—Å—Ç—å –∑–∞–¥–µ—Ä–∂–µ–∫

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 —á–∞—Å–∞  
**–†–∏—Å–∫:** 15% (–¥—Ä–æ–ø —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π)

---

### 2.4 –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º per-session –º–µ—Ç—Ä–∏–∫–∏
recordCounter(`ws.session_clients.${sessionSlug}`, clients.size)
recordLatency(`ws.session_broadcast_lag_ms.${sessionSlug}`, lag)
recordCounter('ws.broadcast_errors_total')
recordCounter('ws.heartbeat_timeouts_total')
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–∞—è —Å–µ—Å—Å–∏—è –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Per-session –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º ‚Üë 500%

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –û–¥–Ω–∞ —Å–µ—Å—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ
–°–µ–π—á–∞—Å: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ ‚Üí –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–∞—è —Å–µ—Å—Å–∏—è
–ü–æ—Å–ª–µ: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "ws.session_broadcast_lag_ms.abc123: 2000ms" ‚Üí –≤–∏–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
```

#### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ per session
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ—Ç—Ä–∏–∫–∞ `ws.session_clients.{sessionSlug}` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –í–∏–¥–∏–º–æ—Å—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
–ü–æ—Å–ª–µ: /metrics –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "ws.session_clients.abc123: 5" ‚Üí –≤–∏–¥–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞
```

#### 3. –ê–ª–µ—Ä—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –≤—ã—Å–æ–∫—É—é –∑–∞–¥–µ—Ä–∂–∫—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: –ü—Ä–æ–±–ª–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è
–ü–æ—Å–ª–µ: –ê–ª–µ—Ä—Ç –ø—Ä–∏ "ws.session_broadcast_lag_ms > 2000ms" ‚Üí –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
```

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º per session
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 —á–∞—Å–∞  
**–†–∏—Å–∫:** 0% (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫)

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π —Ñ—Ä–æ–Ω—Ç–∞

### 3.1 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ partial/final —Ç–∏–ø–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –ò–∑–º–µ–Ω—è–µ–º —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
const payload = {
  type: data.isFinal ? 'transcript_final' : 'transcript_partial',  // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
  // ...
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ß–µ—Ç–∫–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ö–ª–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å `isFinal` –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ–º–∞–Ω—Ç–∏–∫—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –Ø—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å:
if (data.type === 'transcript' && data.isFinal) {
  // –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç
}

–ü–æ—Å–ª–µ:
if (data.type === 'transcript_final') {
  // –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç (—è–≤–Ω–æ)
}
```

#### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ö–ª–∏–µ–Ω—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ —Ç–∏–ø—É
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ ‚Üë 10-15%

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–π—á–∞—Å: –ö–ª–∏–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç isFinal –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
–ü–æ—Å–ª–µ: –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å switch –ø–æ —Ç–∏–ø—É ‚Üí –±—ã—Å—Ç—Ä–µ–µ
```

#### 3. –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–æ—Ç–µ—Ä—è–Ω –ª–∏ final —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—É—á—à–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚Üë 20%

**–†–∏—Å–∫–∏:**
- üî¥ **–°–ª–æ–º–∞–µ—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤** –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üî¥ –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å 3+ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Ñ–∞–π–ª–∞

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –Ø—Å–Ω–æ—Å—Ç—å: —è–≤–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å: –ª—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 —á–∞—Å–∞ (—Å–µ—Ä–≤–µ—Ä) + 2-3 —á–∞—Å–∞ (–∫–ª–∏–µ–Ω—Ç—ã)  
**–†–∏—Å–∫:** 80% (—Å–ª–æ–º–∞–µ—Ç –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤)

---

### 3.2 –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é
const recentUtteranceIds = new Map<string, Set<string>>()  // sessionSlug ‚Üí Set<utteranceId>

function broadcastWithDeduplication(sessionSlug: string, message: ServerTranscriptionMessage) {
  const utteranceIds = recentUtteranceIds.get(sessionSlug) || new Set()
  
  // –ï—Å–ª–∏ final —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç —É–∂–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
  if (message.isFinal && utteranceIds.has(message.utteranceId)) {
    return  // –î—É–±–ª–∏–∫–∞—Ç, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
  }
  
  if (message.isFinal) {
    utteranceIds.add(message.utteranceId)
    // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000
    if (utteranceIds.size > 1000) {
      const first = utteranceIds.values().next().value
      utteranceIds.delete(first)
    }
  }
  
  broadcastToSessionClients(sessionSlug, message)
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ü—Ä–∏ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–µ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 100% –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ final —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏–ª—Å—è, —Å–µ—Ä–≤–µ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã
–°–µ–π—á–∞—Å: –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã ‚Üí –¥—É–±–ª–∏ –≤ UI
–ü–æ—Å–ª–µ: –°–µ—Ä–≤–µ—Ä —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã ‚Üí —á–∏—Å—Ç—ã–π UI
```

#### 2. –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –î—É–±–ª–∏–∫–∞—Ç—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ç—Ä–∞—Ñ–∏–∫
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ–Ω—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Å–µ—Ç–∏
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 5-10% —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞—Ö

#### 3. –ú–µ–Ω—å—à–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–µ—Ä –¥–µ–ª–∞–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é ‚Üí –º–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ ‚Üë 5-10%

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –ß–∏—Å—Ç–æ—Ç–∞: –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –¢—Ä–∞—Ñ–∏–∫: –º–µ–Ω—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –º–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 —á–∞—Å–∞  
**–†–∏—Å–∫:** 30% (–º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –ª–æ–≥–∏–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤)

---

### 3.3 AI –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
```typescript
// –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ LiveKit data channel
// –û–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –æ–±—ä—è–≤–ª—è–µ—Ç —Å–µ–±—è "AI coordinator"
// –î—Ä—É–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç AI

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤ –ë–î
const aiLock = await db.sessionAiLock.upsert({
  where: { sessionId },
  update: { lockedBy: userId, lockedUntil: new Date(Date.now() + 5000) },
  create: { sessionId, lockedBy: userId, lockedUntil: new Date(Date.now() + 5000) }
})

if (aiLock.lockedBy !== userId && aiLock.lockedUntil > new Date()) {
  return  // –£–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–æ–º
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—Å—Ç:**

#### 1. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ AI –≤—ã–∑–æ–≤–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** 5 –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ OpenAI –¥–ª—è –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ª—å–∫–æ 1 –≤—ã–∑–æ–≤ –Ω–∞ —Å–µ—Å—Å–∏—é
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 80% –≤—ã–∑–æ–≤–æ–≤ OpenAI (–ø—Ä–∏ 5 –∫–ª–∏–µ–Ω—Ç–∞—Ö)

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 5 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Å–µ—Å—Å–∏–∏, –≤—Å–µ –≤–∏–¥—è—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã
–°–µ–π—á–∞—Å: 5 –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí 5 –≤—ã–∑–æ–≤–æ–≤ OpenAI ‚Üí $0.05 –∑–∞ —Å–µ—Å—Å–∏—é
–ü–æ—Å–ª–µ: 1 –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä ‚Üí 1 –≤—ã–∑–æ–≤ OpenAI ‚Üí $0.01 –∑–∞ —Å–µ—Å—Å–∏—é (‚Üì 80%)
```

#### 2. –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–∏–Ω –≤—ã–∑–æ–≤ –Ω–∞ —Å–µ—Å—Å–∏—é
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 60-80% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI API

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 100 —Å–µ—Å—Å–∏–π –≤ –¥–µ–Ω—å, –≤ —Å—Ä–µ–¥–Ω–µ–º 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞
–°–µ–π—á–∞—Å: 300 –≤—ã–∑–æ–≤–æ–≤ OpenAI ‚Üí $3/–¥–µ–Ω—å
–ü–æ—Å–ª–µ: 100 –≤—ã–∑–æ–≤–æ–≤ OpenAI ‚Üí $1/–¥–µ–Ω—å (‚Üì 67%)
```

#### 3. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å AI –∏–Ω—Å–∞–π—Ç–æ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –†–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è AI –∏–Ω—Å–∞–π—Ç–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∞:** –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Üë 100%

**–ü—Ä–∏–º–µ—Ä:**
```
–°—Ü–µ–Ω–∞—Ä–∏–π: 3 –∫–ª–∏–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞—é—Ç AI –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
–°–µ–π—á–∞—Å: –ú–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã ‚Üí —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI
–ü–æ—Å–ª–µ: –û–¥–∏–Ω –≤—ã–∑–æ–≤ ‚Üí –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI
```

#### 4. –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:** –ù–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–µ—Å—Å–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Å—Å–∏—é
- **–ú–µ—Ç—Ä–∏–∫–∞:** ‚Üì 60-80% –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ë–î

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –£–≤–µ–ª–∏—á–∏—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)
- ‚ö†Ô∏è –ù—É–∂–µ–Ω fallback, –µ—Å–ª–∏ coordinator –æ—Ç–∫–ª—é—á–∏–ª—Å—è

**–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è: ‚Üì 60-80% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 4-6 —á–∞—Å–æ–≤ (—Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π)  
**–†–∏—Å–∫:** 25% (–Ω—É–∂–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏)

---

## –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–≥–æ–¥

| –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –í—ã–≥–æ–¥–∞ | –ú–µ—Ç—Ä–∏–∫–∞ | –í—Ä–µ–º—è | –†–∏—Å–∫ |
|-----------|--------|---------|-------|------|
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ broadcast** | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–µ—Ç —É—Ç–µ—á–µ–∫ | ‚Üì 100% —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ | 30 –º–∏–Ω | 0% |
| **–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤** | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –Ω–µ—Ç –∑–æ–º–±–∏ | ‚Üì 100% –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ | 1-2 —á | 0% |
| **Heartbeat —É–ª—É—á—à–µ–Ω–∏—è** | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–µ—Ä—Ç–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | ‚Üì 100% –∑–æ–º–±–∏-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π | 1 —á | 5% |
| **FFmpeg low-latency** | –ë—ã—Å—Ç—Ä–µ–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è | ‚Üì 30-40% –∑–∞–¥–µ—Ä–∂–∫–∏ | 2-3 —á | 20% |
| **PCM —á–∞–Ω–∫–∏ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)** | –ì–∏–±–∫–æ—Å—Ç—å | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É | 30 –º–∏–Ω | 0% |
| **Backpressure** | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ | –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ | 2-3 —á | 15% |
| **–ú–µ—Ç—Ä–∏–∫–∏** | –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Üë 500% | 1-2 —á | 0% |
| **Partial/final —Ç–∏–ø—ã** | –Ø—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Üë 10-15% | 4-6 —á | 80%* |
| **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** | –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | ‚Üì 5-10% —Ç—Ä–∞—Ñ–∏–∫–∞ | 1-2 —á | 30% |
| **AI –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è** | –≠–∫–æ–Ω–æ–º–∏—è, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | ‚Üì 60-80% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI | 4-6 —á | 25% |

*–†–∏—Å–∫ 80% —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–µ–ª–∞—Ç—å –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤

---

## –ò—Ç–æ–≥–æ–≤—ã–µ –≤—ã–≥–æ–¥—ã –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

**–û–±—â–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** ‚Üì 100% —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –¢–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–µ–µ broadcast –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

**–í—Ä–µ–º—è:** 2.5-3.5 —á–∞—Å–∞  
**–†–∏—Å–∫:** 0-5%  
**ROI:** –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–° —Ç–µ—Å—Ç–∞–º–∏)

**–û–±—â–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ‚Üì 30-40% –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ per session
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É

**–í—Ä–µ–º—è:** 6-10 —á–∞—Å–æ–≤ (—Å —Ç–µ—Å—Ç–∞–º–∏)  
**–†–∏—Å–∫:** 15-20%  
**ROI:** –í—ã—Å–æ–∫–∏–π (–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–° –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π)

**–û–±—â–∞—è –≤—ã–≥–æ–¥–∞:**
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è:** ‚Üì 60-80% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI
- ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è AI
- ‚úÖ **–Ø—Å–Ω–æ—Å—Ç—å:** –õ—É—á—à–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–¢—Ä–∞—Ñ–∏–∫:** ‚Üì 5-10% –ø—Ä–∏ —Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç–∞—Ö

**–í—Ä–µ–º—è:** 8-12 —á–∞—Å–æ–≤ (—Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π —Ñ—Ä–æ–Ω—Ç–∞)  
**–†–∏—Å–∫:** 25-80% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)  
**ROI:** –°—Ä–µ–¥–Ω–∏–π-–≤—ã—Å–æ–∫–∏–π (—ç–∫–æ–Ω–æ–º–∏—è –¥–µ–Ω–µ–≥, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏)

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–∞—á–∞—Ç—å —Å –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1
**–ü–æ—á–µ–º—É:**
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ (—É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏, –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å—ã)
- –ù—É–ª–µ–≤–æ–π —Ä–∏—Å–∫
- –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (2.5-3.5 —á–∞—Å–∞)
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞

### –ó–∞—Ç–µ–º –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
**–ü–æ—á–µ–º—É:**
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ —Å —Ç–µ—Å—Ç–∞–º–∏
- –°—Ä–µ–¥–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (6-10 —á–∞—Å–æ–≤)
- –ò–∑–º–µ—Ä–∏–º–∞—è –≤—ã–≥–æ–¥–∞

### –ü–æ—Å–ª–µ–¥–Ω–∏–º –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3
**–ü–æ—á–µ–º—É:**
- –¢—Ä–µ–±—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–æ–º
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–ª–≥–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (8-12 —á–∞—Å–æ–≤)
- –í—ã–≥–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Å—à—Ç–∞–±–∞ (—ç–∫–æ–Ω–æ–º–∏—è –¥–µ–Ω–µ–≥)

---

## –ò—Ç–æ–≥

**–û–±—â–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- ‚Üì 100% —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –∑–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚Üì 30-40% –∑–∞–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- ‚Üì 60-80% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ OpenAI
- ‚Üë 500% –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º (–º–µ—Ç—Ä–∏–∫–∏)
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 16-25 —á–∞—Å–æ–≤  
**–û–±—â–∏–π —Ä–∏—Å–∫:** –ù–∏–∑–∫–∏–π –ø—Ä–∏ –ø–æ—ç—Ç–∞–ø–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ

